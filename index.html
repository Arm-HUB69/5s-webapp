<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PCG 5S Random Mascot</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #003865;
            --accent: #f59e0b;
            --bg: #f8fafc;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background-color: var(--bg);
            margin: 0; padding: 20px;
            display: flex; justify-content: center;
        }

        /* 1. Mobile Container */
        .mobile-container {
            width: 100%; max-width: 500px;
            background: white; padding: 20px;
            border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 80px;
        }

        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-weight: 600; margin-bottom: 5px; color: var(--primary); }
        .input-control {
            width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px;
            font-family: 'Prompt', sans-serif; font-size: 1rem; box-sizing: border-box;
        }
        
        .mobile-upload {
            background: #f0f9ff; border: 2px dashed #003865;
            height: 150px; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; margin-bottom: 10px; position: relative; overflow: hidden;
        }
        .mobile-upload img { width: 100%; height: 100%; object-fit: cover; display: none; }
        .mobile-upload span { color: #aaa; pointer-events: none; }

        .btn-save {
            width: 100%; padding: 15px; background: var(--primary);
            color: white; border: none; border-radius: 50px;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 56, 101, 0.3);
        }

        /* 2. Hidden Template (Landscape Poster) */
        #hidden-template {
            position: fixed; top: 0; left: -3000px; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ */
            width: 1280px; 
            background: white; padding: 40px; border: 1px solid #ddd;
        }

        .poster-header {
            background: var(--primary); color: white;
            padding: 20px 40px; border-radius: 15px;
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 30px; border-bottom: 5px solid var(--accent);
        }
        .poster-logo { font-size: 2rem; font-weight: 800; background: white; color: var(--primary); padding: 5px 20px; border-radius: 8px; }
        .poster-title { font-size: 2.5rem; font-weight: 700; }

        .poster-photos { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px; }
        .photo-frame {
            border: 2px solid #eee; border-radius: 12px; overflow: hidden;
            background: #f9f9f9; height: 450px;
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }
        .badge {
            display: inline-block; padding: 8px 20px; border-radius: 20px;
            font-size: 1.2rem; font-weight: bold; margin-bottom: 10px; color: #333; background: #eee;
        }

        .poster-info {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px;
            background: #f8fafc; padding: 30px; border-radius: 15px;
        }
        .info-box label { display: block; font-size: 1.1rem; font-weight: 600; color: #666; margin-bottom: 5px; }
        .info-box div { font-size: 1.3rem; font-weight: 500; color: #000; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
        
        .poster-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px; }
        .detail-box { background: #f0f9ff; padding: 20px; border-radius: 12px; border: 1px solid #bae6fd; }
        .detail-box label { display: block; font-size: 1.2rem; font-weight: 700; color: var(--primary); margin-bottom: 10px; }
        .detail-box div { font-size: 1.2rem; line-height: 1.5; min-height: 80px; }

        /* Mascot Corner */
        .mascot-corner { position: fixed; bottom: 10px; left: 10px; pointer-events: none; z-index: 100; }
        .mascot-corner img { width: 100px; filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2)); }

    </style>
</head>
<body>

    <div class="mobile-container">
        <h2 style="text-align:center; color:var(--primary);">PCG üêæ5S-Report</h2>
        
        <div class="input-group">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 5‡∏™:</label>
            <select id="inp-title" class="input-control" onchange="syncData()">
                <option value="1. ‡∏™‡∏∞‡∏™‡∏≤‡∏á (Seiri)">1. ‡∏™‡∏∞‡∏™‡∏≤‡∏á (Seiri)</option>
                <option value="2. ‡∏™‡∏∞‡∏î‡∏ß‡∏Å (Seiton)">2. ‡∏™‡∏∞‡∏î‡∏ß‡∏Å (Seiton)</option>
                <option value="3. ‡∏™‡∏∞‡∏≠‡∏≤‡∏î (Seiso)">3. ‡∏™‡∏∞‡∏≠‡∏≤‡∏î (Seiso)</option>
                <option value="4. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Seiketsu)">4. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Seiketsu)</option>
                <option value="5. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢ (Shitsuke)">5. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢ (Shitsuke)</option>
            </select>
        </div>

        <div class="input-group">
            <label>‡∏£‡∏π‡∏õ Before:</label>
            <div class="mobile-upload" onclick="document.getElementById('file-before').click()">
                <span id="txt-before">+ ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ</span>
                <img id="view-before">
            </div>
            <input type="file" id="file-before" hidden accept="image/*" onchange="loadFile(this, 'view-before', 'out-before')">
        </div>

        <div class="input-group">
            <label>‡∏£‡∏π‡∏õ After:</label>
            <div class="mobile-upload" onclick="document.getElementById('file-after').click()">
                <span id="txt-after">+ ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ</span>
                <img id="view-after">
            </div>
            <input type="file" id="file-after" hidden accept="image/*" onchange="loadFile(this, 'view-after', 'out-after')">
        </div>

        <div class="input-group">
            <label>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (Area):</label>
            <select id="inp-area" class="input-control" onchange="syncData()">
                <option value="OFFICE">OFFICE</option>
                <option value="FillPack 1,2,3,4">FillPack 1, 2, 3, 4</option>
                <option value="FillPack 5,6,7,8,9">FillPack 5, 6, 7, 8, 9</option>
                <option value="FillPack 10,11,12">FillPack 10, 11, 12</option>
                <option value="Blending">Blending</option>
                <option value="‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏î‡∏Ç‡∏¢‡∏∞">‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏î‡∏Ç‡∏¢‡∏∞</option>
            </select>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <div class="input-group">
                <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
                <input type="date" id="inp-date" class="input-control" onchange="syncData()">
            </div>
            <div class="input-group">
                <label>‡∏ú‡∏π‡πâ‡∏ó‡∏≥:</label>
                <input type="text" id="inp-worker" class="input-control" placeholder="‡∏ä‡∏∑‡πà‡∏≠" onkeyup="syncData()">
            </div>
        </div>

        <div class="input-group">
            <label>‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á:</label>
            <textarea id="inp-improve" class="input-control" rows="2" onkeyup="syncData()"></textarea>
        </div>
        <div class="input-group">
            <label>‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:</label>
            <textarea id="inp-benefit" class="input-control" rows="2" onkeyup="syncData()"></textarea>
        </div>

        <button class="btn-save" id="saveBtn" onclick="saveImage()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
    </div>

    <div id="hidden-template">
        <div class="poster-header">
            <div class="poster-logo">PCG</div>
            <div id="out-title" class="poster-title">1. ‡∏™‡∏∞‡∏™‡∏≤‡∏á (Seiri)</div>
            <div style="width:80px;"></div>
        </div>

        <div class="poster-photos">
            <div>
                <div class="badge" style="color:#d32f2f; background:#ffcdd2;">üî¥ ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (Before)</div>
                <div class="photo-frame"><img id="out-before"></div>
            </div>
            <div>
                <div class="badge" style="color:#388e3c; background:#c8e6c9;">üü¢ ‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (After)</div>
                <div class="photo-frame"><img id="out-after"></div>
            </div>
        </div>

        <div class="poster-info">
            <div class="info-box"><label>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (Area)</label><div id="out-area">-</div></div>
            <div class="info-box"><label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</label><div id="out-date">-</div></div>
            <div class="info-box"><label>‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô</label><div id="out-worker">-</div></div>
        </div>

        <div class="poster-details">
            <div class="detail-box">
                <label>‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (Improvement)</label>
                <div id="out-improve">-</div>
            </div>
            <div class="detail-box">
                <label>‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö (Benefit)</label>
                <div id="out-benefit">-</div>
            </div>
        </div>
    </div>

    <div class="mascot-corner">
        <img id="mascot-img" src="" alt="Mascot">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // ==========================================
        // 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏° GIF (Random Mascot)
        // ==========================================
        const mascotGifs = [
            "https://i.gifer.com/1uHg.gif",
            "https://i.gifer.com/4tyo.gif",
            "https://i.gifer.com/nS2.gif",
            "https://i.gifer.com/2iFb.gif",
            "https://i.gifer.com/nRq.gif",
            "https://i.gifer.com/y2.gif",
            "https://i.gifer.com/av.gif"
        ];

        function setRandomMascot() {
            const randomIndex = Math.floor(Math.random() * mascotGifs.length);
            document.getElementById('mascot-img').src = mascotGifs[randomIndex];
        }

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
        setRandomMascot();


        // ==========================================
        // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Handling)
        // ==========================================
        document.getElementById('inp-date').valueAsDate = new Date();
        syncData(); 

        function loadFile(input, viewId, outId) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById(viewId).src = e.target.result;
                    document.getElementById(viewId).style.display = 'block';
                    document.getElementById(outId).src = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function syncData() {
            document.getElementById('out-title').innerText = document.getElementById('inp-title').value;
            document.getElementById('out-area').innerText = document.getElementById('inp-area').value;
            document.getElementById('out-date').innerText = document.getElementById('inp-date').value;
            document.getElementById('out-worker').innerText = document.getElementById('inp-worker').value || '-';
            document.getElementById('out-improve').innerText = document.getElementById('inp-improve').value || '-';
            document.getElementById('out-benefit').innerText = document.getElementById('inp-benefit').value || '-';
        }

        function saveImage() {
            syncData();
            const template = document.getElementById('hidden-template');
            const btn = document.getElementById('saveBtn');

            btn.innerText = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            btn.disabled = true;

            html2canvas(template, {
                scale: 2, 
                backgroundColor: "#ffffff"
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'PCG-5S-Report-' + Date.now() + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();

                btn.innerText = 'üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û';
                btn.disabled = false;
                alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! üò∫');
            }).catch(err => {
                console.error(err);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏îüòø');
                btn.disabled = false;
            });
        }
    </script>
</body>
</html>